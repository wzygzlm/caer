<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>netparser_documentation</title>


<style type="text/css">
body {
  font-family: Helvetica, arial, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: white;
  padding: 30px; }

body > *:first-child {
  margin-top: 0 !important; }
body > *:last-child {
  margin-bottom: 0 !important; }

a {
  color: #4183C4; }
a.absent {
  color: #cc0000; }
a.anchor {
  display: block;
  padding-left: 30px;
  margin-left: -30px;
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0; }

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  cursor: text;
  position: relative; }

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
  text-decoration: none; }

h1 tt, h1 code {
  font-size: inherit; }

h2 tt, h2 code {
  font-size: inherit; }

h3 tt, h3 code {
  font-size: inherit; }

h4 tt, h4 code {
  font-size: inherit; }

h5 tt, h5 code {
  font-size: inherit; }

h6 tt, h6 code {
  font-size: inherit; }

h1 {
  font-size: 28px;
  color: black; }

h2 {
  font-size: 24px;
  border-bottom: 1px solid #cccccc;
  color: black; }

h3 {
  font-size: 18px; }

h4 {
  font-size: 16px; }

h5 {
  font-size: 14px; }

h6 {
  color: #777777;
  font-size: 14px; }

p, blockquote, ul, ol, dl, li, table, pre {
  margin: 15px 0; }

hr {
  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
  border: 0 none;
  color: #cccccc;
  height: 4px;
  padding: 0;
}

body > h2:first-child {
  margin-top: 0;
  padding-top: 0; }
body > h1:first-child {
  margin-top: 0;
  padding-top: 0; }
  body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
  margin-top: 0;
  padding-top: 0; }

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0; }

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
  margin-top: 0; }

li p.first {
  display: inline-block; }
li {
  margin: 0; }
ul, ol {
  padding-left: 30px; }

ul :first-child, ol :first-child {
  margin-top: 0; }

dl {
  padding: 0; }
  dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px; }
    dl dt:first-child {
      padding: 0; }
    dl dt > :first-child {
      margin-top: 0; }
    dl dt > :last-child {
      margin-bottom: 0; }
  dl dd {
    margin: 0 0 15px;
    padding: 0 15px; }
    dl dd > :first-child {
      margin-top: 0; }
    dl dd > :last-child {
      margin-bottom: 0; }

blockquote {
  border-left: 4px solid #dddddd;
  padding: 0 15px;
  color: #777777; }
  blockquote > :first-child {
    margin-top: 0; }
  blockquote > :last-child {
    margin-bottom: 0; }

table {
  padding: 0;border-collapse: collapse; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }

img {
  max-width: 100%; }

span.frame {
  display: block;
  overflow: hidden; }
  span.frame > span {
    border: 1px solid #dddddd;
    display: block;
    float: left;
    overflow: hidden;
    margin: 13px 0 0;
    padding: 7px;
    width: auto; }
  span.frame span img {
    display: block;
    float: left; }
  span.frame span span {
    clear: both;
    color: #333333;
    display: block;
    padding: 5px 0 0; }
span.align-center {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-center > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: center; }
  span.align-center span img {
    margin: 0 auto;
    text-align: center; }
span.align-right {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-right > span {
    display: block;
    overflow: hidden;
    margin: 13px 0 0;
    text-align: right; }
  span.align-right span img {
    margin: 0;
    text-align: right; }
span.float-left {
  display: block;
  margin-right: 13px;
  overflow: hidden;
  float: left; }
  span.float-left span {
    margin: 13px 0 0; }
span.float-right {
  display: block;
  margin-left: 13px;
  overflow: hidden;
  float: right; }
  span.float-right > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: right; }

code, tt {
  margin: 0 2px;
  padding: 0 5px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px; }

pre code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent; }

.highlight pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }

pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }
  pre code, pre tt {
    background-color: transparent;
    border: none; }

sup {
    font-size: 0.83em;
    vertical-align: super;
    line-height: 0;
}

kbd {
  display: inline-block;
  padding: 3px 5px;
  font-size: 11px;
  line-height: 10px;
  color: #555;
  vertical-align: middle;
  background-color: #fcfcfc;
  border: solid 1px #ccc;
  border-bottom-color: #bbb;
  border-radius: 3px;
  box-shadow: inset 0 -1px 0 #bbb
}

* {
	-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:0 auto;
    }
}
@media print {
	table, pre {
		page-break-inside: avoid;
	}
	pre {
		word-wrap: break-word;
	}
}
</style>


</head>

<body>

<h1 id="toc_0">NetParser cAER Module</h1>

<p>The netparser is a network (neural network) manager. It serves two main functions:</p>

<ol>
<li>It abstracts away having to manually set the SRAM and CAM registers to connect two neurons. </li>
<li>It keeps a map off all connections made through it, enabling connection queries.</li>
</ol>

<p>If you just want to use this module to easily program dynapse neuron connections read the <a href="#tutorial-pane">tutorial</a> section. </p>

<p>If you want to understand how this module works so that you can call its functions as an API inside cAER or contribute to it, read the <a href="#documentation-pane">documentation</a> first, then come back and read the tutorial.</p>

<h1 id="toc_1"><a name="tutorial-pane"></a>Tutorial Table</h1>

<ul>
<li><a href="#txt-pane">Network TXT Parser</a>
<ul>
<li><a href="#txt-format-pane">Format</a></li>
<li><a href="#txt-examples-pane">Examples</a> </li>
<li><a href="#txt-script-pane">Scripts</a></li>
</ul></li>

<li><a href="#xml-pane">Network XML Parser</a>
<ul>
<li><a href="#xml-format-pane">Format</a></li>
<li><a href="#xml-examples-pane">Examples</a> </li>
<li><a href="#xml-script-pane">Scripts</a></li>
</ul></li>

<li><a href="#bias-pane">Biases and Tau Parser</a>
<ul>
<li><a href="#bias-format-pane">Format</a></li>
<li><a href="#bias-examples-pane">Examples</a> </li>
</ul></li>

<li><a href="#gui-pane">GUI</a></li>
<li><a href="#test-pane">Test</a></li>
<li><a href="#documentation-pane">Documentation Intro</a></li>
</ul>

<h2 id="toc_2">Parsers</h2>

<p>This module includes two parsers: a first one that can &quot;read in&quot; a network topology from either a <a href="#txt-pane">.txt</a> or an <a href="#xml-pane">.xml</a> file and program the dynapse to match it, and a second one able to read a Biases and Tau configuration and apply it to dynapse.</p>

<h2 id="toc_3"><a name="txt-pane"></a>Network TXT Parser</h2>

<p>In this section I&#39;ll explain the <a href="#txt-format-pane"><strong>format</strong></a> of the network document with some <a href="#txt-examples-pane"><strong>examples</strong></a>. I&#39;ll show a small <a href="#txt-script-pane"><strong>script</strong></a> to generate these files and show you how to use the <a href="#gui-pane"><strong>java gui interface</strong></a> for this module to program the dynapse with it. </p>

<h3 id="toc_4"><a name="txt-format-pane"></a>Format</h3>

<hr>

<p><strong>Connection Format</strong>: </p>

<p><code>PreSynaptic_address</code>-&gt;<code>connection_type</code>-<code>CAM_slots</code>-<code>PostSynaptic_address</code></p>

<p>Where addresses have the following format:</p>

<p><strong>Address</strong>: U<code>ChipID</code>-C<code>CoreID</code>-N<code>NeuronID</code></p>

<p><strong>Connection Type</strong>:
There are 4 <code>connection_type</code>s</p>

<table>
<thead>
<tr>
<th>Connection Type</th>
<th>ID</th>
</tr>
</thead>

<tbody>
<tr>
<td>Slow Inhibitory</td>
<td>0</td>
</tr>
<tr>
<td>Fast Inhibitory</td>
<td>1</td>
</tr>
<tr>
<td>Slow Excitatory</td>
<td>2</td>
</tr>
<tr>
<td>Fast Excitatory</td>
<td>3</td>
</tr>
</tbody>
</table>

<p><strong>CAM_slots</strong>:
 <code>CAM_slots</code> go from <code>00-64</code></p>

<p>I think examples illustrates this much better.</p>

<h3 id="toc_5"><a name="txt-examples-pane"></a>Examples</h3>

<hr>

<h4 id="toc_6">One connection</h4>

<p>If I want to connect neuron 5 from core 1 from chip 0 to neuron 6 from core 3 from chip 2 using an excitatory fast connection (3) and taking up 8 CAM slots I would simply write:</p>

<p><code>U00-C01-N005-&gt;3-08-U02-C03-N006</code></p>

<p>If I instead wanted to do so with a slow inhibitory connection I would just change the connection type from a 3 to a 0:</p>

<p><code>U00-C01-N005-&gt;0-08-U02-C03-N006</code></p>

<p>If I wanted to instead use all the CAMs in neuron <code>U02-C03-N006</code>, I would change the 08 to 64:</p>

<p><code>U00-C01-N005-&gt;0-64-U02-C03-N006</code></p>

<p>If I wanted to only program the neuron CAM such to use FPGA spike generator to send events in neuron <code>U02-C03-N006</code>, I would just change the source neuron from U00 to U04. U04 can be seen as an external chip input. The address that will be written in the destination neuron CAM is specified by the source neuron core and number (in this case <code>C01-N005</code>)</p>

<p><code>U04-C01-N005-&gt;0-64-U02-C03-N006</code></p>

<h4 id="toc_7">Many connections</h4>

<p>Finally, we can obviously set more than one connection. Here is an example of a file that would connect neurons 1 through 5 from core 1 in chip 0 to neurons 6 through 10 from core 3 in chip 2 using fast excitatory connections and all CAM slots in the post synaptic neurons.</p>

<div><pre><code class="language-none">U00-C01-N001-&gt;3-64-U02-C003-N006
U00-C01-N002-&gt;3-64-U02-C003-N007
U00-C01-N003-&gt;3-64-U02-C003-N008
U00-C01-N004-&gt;3-64-U02-C003-N009
U00-C01-N005-&gt;3-64-U02-C003-N010</code></pre></div>

<h3 id="toc_8"><a name="txt-script-pane"></a>Scripts</h3>

<hr>

<p>As you can imagine, creating these files is quite easy. For example, here is a python script to generate a file that will connect the first 5 neurons in cores 1 and 3 from chip 0 to chip 2. </p>

<div><pre><code class="language-none">filename = &#39;myNetwork.txt&#39;

cores = [1,3]
neurons = range(5)

with open(filename, &#39;w&#39;) as f:
    for core in cores:
        for neuron in range(neurons):
            f.write(&#39;U00-C{:02d}-N{:03d}-&gt;2-16-
                   U02-C{:02d}-N{:03d}\n&#39;.format(
                   core, neuron, core, neuron))
</code></pre></div>

<p>Which outputs the following file</p>

<div><pre><code class="language-none">U00-C01-N000-&gt;2-16-U02-C01-N000
U00-C01-N001-&gt;2-16-U02-C01-N001
U00-C01-N002-&gt;2-16-U02-C01-N002
U00-C01-N003-&gt;2-16-U02-C01-N003
U00-C01-N004-&gt;2-16-U02-C01-N004
U00-C03-N000-&gt;2-16-U02-C03-N000
U00-C03-N001-&gt;2-16-U02-C03-N001
U00-C03-N002-&gt;2-16-U02-C03-N002
U00-C03-N003-&gt;2-16-U02-C03-N003
U00-C03-N004-&gt;2-16-U02-C03-N004</code></pre></div>

<h2 id="toc_9"><a name="xml-pane"></a>Network XML Parser</h2>

<p>In this section I&#39;ll explain the <a href="#format_pane"><strong>format</strong></a> of the network document with some <a href="#examples-pane"><strong>examples</strong></a>. I&#39;ll show a small <a href="#script-pane"><strong>script</strong></a> to generate these files and show you how to use the <a href="#gui-pane"><strong>java gui interface</strong></a> for this module to program the dynapse with it. </p>

<h3 id="toc_10"><a name="xml-format-pane"></a>Format</h3>

<hr>

<p><strong>Document Format</strong>:
The XML connection document should folow the following format. </p>

<div><pre><code class="language-none">&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;
&lt;CONNECTIONS&gt;
  &lt;CONNECTION&gt; conection info 1 &lt;/CONNECTION&gt;
  &lt;CONNECTION&gt; conection info 2 &lt;/CONNECTION&gt;
                ...
  &lt;CONNECTION&gt; conection info N &lt;/CONNECTION&gt;
&lt;/CONNECTIONS&gt;</code></pre></div>

<p><strong>Connection Format</strong>:
Individual connections should have the following format</p>

<div><pre><code class="language-none">&lt;CONNECTION cam_slots_number=&quot;16&quot; connection_type=&quot;1&quot;&gt;
    &lt;PRE CHIP=&quot;1&quot; CORE=&quot;1&quot; NEURON=&quot;217&quot;/&gt;
    &lt;POST CHIP=&quot;0&quot; CORE=&quot;0&quot; NEURON=&quot;217&quot;/&gt;
&lt;/CONNECTION&gt;</code></pre></div>

<p>Where the connection types are as follows:</p>

<table>
<thead>
<tr>
<th>Connection Type</th>
<th>ID</th>
</tr>
</thead>

<tbody>
<tr>
<td>Slow Inhibitory</td>
<td>0</td>
</tr>
<tr>
<td>Fast Inhibitory</td>
<td>1</td>
</tr>
<tr>
<td>Slow Excitatory</td>
<td>2</td>
</tr>
<tr>
<td>Fast Excitatory</td>
<td>3</td>
</tr>
</tbody>
</table>

<p>and the other parameters have the following ranges </p>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Range</th>
</tr>
</thead>

<tbody>
<tr>
<td>CHIP</td>
<td>0-3</td>
</tr>
<tr>
<td>CORE</td>
<td>0-3</td>
</tr>
<tr>
<td>NEURON</td>
<td>0-255</td>
</tr>
<tr>
<td>cam<em>slots</em>number</td>
<td>0-64</td>
</tr>
</tbody>
</table>

<p>I think examples illustrates this much better.</p>

<h3 id="toc_11"><a name="xml-examples-pane"></a>Examples</h3>

<hr>

<h4 id="toc_12">One connection</h4>

<p>If I want to connect neuron 5 from core 1 from chip 0 to neuron 6 from core 3 from chip 2 using an excitatory fast connection (3) and taking up 8 CAM slots I would simply write:</p>

<div><pre><code class="language-none">&lt;CONNECTION cam_slots_number=&quot;8&quot; connection_type=&quot;3&quot;&gt;
    &lt;PRE CHIP=&quot;0&quot; CORE=&quot;1&quot; NEURON=&quot;5&quot;/&gt;
    &lt;POST CHIP=&quot;2&quot; CORE=&quot;3&quot; NEURON=&quot;6&quot;/&gt;
&lt;/CONNECTION&gt;</code></pre></div>

<p>If I instead wanted to do so with a slow inhibitory connection I would just change the connection type from a 3 to a 0:</p>

<div><pre><code class="language-none">&lt;CONNECTION cam_slots_number=&quot;8&quot; connection_type=&quot;0&quot;&gt;
    &lt;PRE CHIP=&quot;0&quot; CORE=&quot;1&quot; NEURON=&quot;5&quot;/&gt;
    &lt;POST CHIP=&quot;2&quot; CORE=&quot;3&quot; NEURON=&quot;6&quot;/&gt;
&lt;/CONNECTION&gt;</code></pre></div>

<p>If I wanted to instead use all the CAMs in neuron <code>U02-C03-N006</code>, I would change the 08 to 64:</p>

<div><pre><code class="language-none">&lt;CONNECTION cam_slots_number=&quot;64&quot; connection_type=&quot;0&quot;&gt;
    &lt;PRE CHIP=&quot;0&quot; CORE=&quot;1&quot; NEURON=&quot;5&quot;/&gt;
    &lt;POST CHIP=&quot;2&quot; CORE=&quot;3&quot; NEURON=&quot;6&quot;/&gt;
&lt;/CONNECTION&gt;</code></pre></div>

<p>If I wanted to only program the neuron CAM such to use FPGA spike generator to send events in neuron <code>U02-C03-N006</code>, I would just change the PRE CHIP parameter from 2 to 4. Chip 4 can be seen as an external chip input. The address that will be written in the destination neuron CAM is specified by the source neuron core and number (in this case <code>CORE=&quot;1&quot; NEURON=&quot;5&quot;</code>)</p>

<div><pre><code class="language-none">&lt;CONNECTION cam_slots_number=&quot;64&quot; connection_type=&quot;0&quot;&gt;
    &lt;PRE CHIP=&quot;4&quot; CORE=&quot;1&quot; NEURON=&quot;5&quot;/&gt;
    &lt;POST CHIP=&quot;2&quot; CORE=&quot;3&quot; NEURON=&quot;6&quot;/&gt;
&lt;/CONNECTION&gt;</code></pre></div>

<h4 id="toc_13">Many connections</h4>

<p>Finally, we can obviously set more than one connection. Here is an example of a file that would connect neurons 1 through 3 from core 1 in chip 0 to neurons 4 through 7 from core 3 in chip 2 using fast excitatory connections and all CAM slots in the post synaptic neurons.</p>

<div><pre><code class="language-none">&lt;CONNECTIONS&gt;
  &lt;CONNECTION cam_slots_number=&quot;64&quot; connection_type=&quot;3&quot;&gt;
    &lt;PRE CHIP=&quot;0&quot; CORE=&quot;1&quot; NEURON=&quot;1&quot;/&gt;
    &lt;POST CHIP=&quot;2&quot; CORE=&quot;3&quot; NEURON=&quot;4&quot;/&gt;
  &lt;/CONNECTION&gt;
  &lt;CONNECTION cam_slots_number=&quot;64&quot; connection_type=&quot;3&quot;&gt;
    &lt;PRE CHIP=&quot;0&quot; CORE=&quot;1&quot; NEURON=&quot;1&quot;/&gt;
    &lt;POST CHIP=&quot;2&quot; CORE=&quot;3&quot; NEURON=&quot;5&quot;/&gt;
  &lt;/CONNECTION&gt;
  &lt;CONNECTION cam_slots_number=&quot;64&quot; connection_type=&quot;3&quot;&gt;
    &lt;PRE CHIP=&quot;0&quot; CORE=&quot;1&quot; NEURON=&quot;2&quot;/&gt;
    &lt;POST CHIP=&quot;2&quot; CORE=&quot;3&quot; NEURON=&quot;6&quot;/&gt;
  &lt;/CONNECTION&gt;
  &lt;CONNECTION cam_slots_number=&quot;64&quot; connection_type=&quot;3&quot;&gt;
    &lt;PRE CHIP=&quot;0&quot; CORE=&quot;1&quot; NEURON=&quot;3&quot;/&gt;
    &lt;POST CHIP=&quot;2&quot; CORE=&quot;3&quot; NEURON=&quot;7&quot;/&gt;
  &lt;/CONNECTION&gt;
&lt;/CONNECTIONS&gt; </code></pre></div>

<h3 id="toc_14"><a name="xml-script-pane"></a>Scripts</h3>

<hr>

<p>As you can imagine, creating these files is quite easy. For example, here is a python script to generate a file that will connect the first 5 neurons in cores 1 and 3 from chip 0 to chip 2. </p>

<div><pre><code class="language-none">from lxml import etree as ET

filename = &#39;my_demo_network.xml&#39;
cam_slot_number = 16

Connections = ET.Element(&#39;CONNECTIONS&#39;)


cores = [1,3]
neurons = range(4)
connection_type = 2
cam_slots_number = 16


for core in cores:
    for neuron in neurons:
        New_Connection = ET.SubElement(Connections,&#39;CONNECTION&#39;,
            attrib={
            &quot;cam_slots_number&quot;:str(cam_slots_number),
            &quot;connection_type&quot;:str(connection_type)
            })

        PRE = ET.SubElement(New_Connection,&#39;PRE&#39;, {
            &#39;CHIP&#39;:&quot;0&quot;,
            &#39;CORE&#39;:str(core),
            &#39;NEURON&#39;:str(neuron)
            })

        POST = ET.SubElement(New_Connection,&#39;POST&#39;, {
            &#39;CHIP&#39;:&quot;1&quot;,
            &#39;CORE&#39;:str(core),
            &#39;NEURON&#39;:str(neuron)
            })

tree = ET.ElementTree(Connections)
tree.write(filename, pretty_print=True, xml_declaration=True, encoding=&quot;utf-8&quot;)
print(&#39;Network written to {}&#39;.format(filename))
</code></pre></div>

<p>Which outputs the following file</p>

<div><pre><code class="language-none">&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;
&lt;CONNECTIONS&gt;
  &lt;CONNECTION cam_slots_number=&quot;16&quot; connection_type=&quot;2&quot;&gt;
    &lt;PRE CHIP=&quot;0&quot; CORE=&quot;1&quot; NEURON=&quot;0&quot;/&gt;
    &lt;POST CHIP=&quot;1&quot; CORE=&quot;1&quot; NEURON=&quot;0&quot;/&gt;
  &lt;/CONNECTION&gt;
  &lt;CONNECTION cam_slots_number=&quot;16&quot; connection_type=&quot;2&quot;&gt;
    &lt;PRE CHIP=&quot;0&quot; CORE=&quot;1&quot; NEURON=&quot;1&quot;/&gt;
    &lt;POST CHIP=&quot;1&quot; CORE=&quot;1&quot; NEURON=&quot;1&quot;/&gt;
  &lt;/CONNECTION&gt;
  &lt;CONNECTION cam_slots_number=&quot;16&quot; connection_type=&quot;2&quot;&gt;
    &lt;PRE CHIP=&quot;0&quot; CORE=&quot;1&quot; NEURON=&quot;2&quot;/&gt;
    &lt;POST CHIP=&quot;1&quot; CORE=&quot;1&quot; NEURON=&quot;2&quot;/&gt;
  &lt;/CONNECTION&gt;
  &lt;CONNECTION cam_slots_number=&quot;16&quot; connection_type=&quot;2&quot;&gt;
    &lt;PRE CHIP=&quot;0&quot; CORE=&quot;1&quot; NEURON=&quot;3&quot;/&gt;
    &lt;POST CHIP=&quot;1&quot; CORE=&quot;1&quot; NEURON=&quot;3&quot;/&gt;
  &lt;/CONNECTION&gt;
  &lt;CONNECTION cam_slots_number=&quot;16&quot; connection_type=&quot;2&quot;&gt;
    &lt;PRE CHIP=&quot;0&quot; CORE=&quot;3&quot; NEURON=&quot;0&quot;/&gt;
    &lt;POST CHIP=&quot;1&quot; CORE=&quot;3&quot; NEURON=&quot;0&quot;/&gt;
  &lt;/CONNECTION&gt;
  &lt;CONNECTION cam_slots_number=&quot;16&quot; connection_type=&quot;2&quot;&gt;
    &lt;PRE CHIP=&quot;0&quot; CORE=&quot;3&quot; NEURON=&quot;1&quot;/&gt;
    &lt;POST CHIP=&quot;1&quot; CORE=&quot;3&quot; NEURON=&quot;1&quot;/&gt;
  &lt;/CONNECTION&gt;
  &lt;CONNECTION cam_slots_number=&quot;16&quot; connection_type=&quot;2&quot;&gt;
    &lt;PRE CHIP=&quot;0&quot; CORE=&quot;3&quot; NEURON=&quot;2&quot;/&gt;
    &lt;POST CHIP=&quot;1&quot; CORE=&quot;3&quot; NEURON=&quot;2&quot;/&gt;
  &lt;/CONNECTION&gt;
  &lt;CONNECTION cam_slots_number=&quot;16&quot; connection_type=&quot;2&quot;&gt;
    &lt;PRE CHIP=&quot;0&quot; CORE=&quot;3&quot; NEURON=&quot;3&quot;/&gt;
    &lt;POST CHIP=&quot;1&quot; CORE=&quot;3&quot; NEURON=&quot;3&quot;/&gt;
  &lt;/CONNECTION&gt;
&lt;/CONNECTIONS&gt;
</code></pre></div>

<h2 id="toc_3"><a name="bias-pane"></a>Biases and Tau TXT Parser</h2>

<p>In this section I&#39;ll explain the <a href="#biases-format-pane"><strong>format</strong></a> of the biases document with some <a href="#biases-examples-pane"><strong>examples</strong></a> of how to specify Biases and Tau constant type and show you how to use the <a href="#gui-pane"><strong>java gui interface</strong></a> for this module to program the dynapse with it. </p>

<h3 id="toc_4"><a name="bias-format-pane"></a>Format</h3>

<hr>

<p><strong>BIAS FORMAT</strong>: </p>

<p><code>Core_address</code>-<code>bias_type</code>-<code>coarse_value</code>-<code>fine_value</code>-<code>current_level</code></p>

<p>Where Core_address have the following format:</p>

<p><strong>Core address</strong>: U<code>ChipID</code>-C<code>CoreID</code></p>

<p><strong>Bias Type</strong>:
There are 25 <code>bias_type</code></p>

<table style="width: 30%; display: inline-block;">
<thead>
<tr>
<th>Neuron Bias</th>
</tr>
</thead>
<tbody>
<tr>
<td>IF_AHTAU_N</td>
</tr>
<tr>
<td>IF_AHTHR_N</td>
</tr>
<tr>
<td>IF_AHW_P</td>
</tr>
<tr>
<td>IF_BUF_P</td>
</tr>
<tr>
<td>IF_CASC_N</td>
</tr>
<tr>
<td>IF_DC_P</td>
</tr>
<tr>
<td>IF_NMDA_N</td>
</tr>
<tr>
<td>IF_RFR_N</td>
</tr>
<tr>
<td>IF_TAU1_N</td>
</tr>
<tr>
<td>IF_TAU2_N</td>
</tr>
<tr>
<td>IF_THR_N</td>
</tr>
</tbody>
</table>

<table style="width: 30%; display: inline-block;">
<thead>
<tr>
<th>Synapse Bias</th>
</tr>
</thead>
<tbody>
<tr>
<td>NPDPIE_TAU_F_P</td>
</tr>
<tr>
<td>NPDPIE_TAU_S_P</td>
</tr>
<tr>
<td>NPDPIE_THR_F_P</td>
</tr>
<tr>
<td>NPDPIE_THR_S_P</td>
</tr>
<tr>
<td>NPDPII_TAU_F_P</td>
</tr>
<tr>
<td>NPDPII_TAU_S_P</td>
</tr>
<tr>
<td>NPDPII_THR_F_P</td>
</tr>
<tr>
<td>NPDPII_THR_S_P</td>
</tr>
<tr>
<td>PS_WEIGHT_EXC_F_N</td>
</tr>
<tr>
<td>PS_WEIGHT_EXC_S_N</td>
</tr>
<tr>
<td>PS_WEIGHT_INH_F_N</td>
</tr>
<tr>
<td>PS_WEIGHT_INH_S_N</td>
</tr>
<tr>
<td>PULSE_PWLK_P</td>
</tr>
<tr>
<td>R2R_P</td>
</tr>
</tbody>
</table>

<p><strong>Coarse value</strong>: it can go from 0 to 7, where 0 is the maximum value and 7 is the minimum</p>

<p><strong>Fine value</strong>: it can go from 0 to 255, where 0 is the minimum value and 255 is the maximum</p>

<p><strong>Current level</strong>: it can be true or false, where true correspond to high current, and false to low current</p>

<p>A detailed explanation about biases can be found at <a href="https://inilabs.com/support/hardware/user-guide-dynap-se/#h.98pkv78ec653">Bias user guide</a></p>

<p><strong>TAU FORMAT</strong>: </p>

<p>Every Neuron in dynapse has the possiblity to be exploit two different time constants: TAU1 and TAU2. From software it is possible to decide which neurons must exploit TAU2 constant, but it's not possible to do the same for TAU1. In fact, only a whole core can be restored to the default TAU1 constant. For this reason, the optimal approach is to specify with a txt file only the neurons that must exploit TAU2 constant, then restore all neurons to TAU1 whenever a new configuration must be programmed. The advantage of having 2 selectable different TAU for every neuron is the possibility to tune two different time constants inside the same chip (changing the biases IF_TAU1_N and IF_TAU2_N).</p>

<p>Tau2 constant can be specified in the txt file in the following way:</p>

<p><code>Neuron_address</code>-<code>TAU2</code></p>

<p>Where Neuron_address has the following format:</p>

<p><strong>Neuron address</strong>: U<code>ChipID</code>-C<code>CoreID</code>-N<code>NeuronID</code></p>

<h3 id="toc_11"><a name="bias-examples-pane"></a>Examples</h3>

<hr>

<h4 id="toc_12">Bias setting</h4>

<p>If I want to change parameter IF_DC_P of core 0 in chip 0 to coarse value 0, fine value 10, current level high, i would simply write:</p>

<p><code>U0-C0-IF_DC_P-0-10-true</code></p>

<p>The same concept can be applied to any parameter of neurons and synapses.

<h4 id="toc_12">Tau2 setting</h4>

<p>If I want to set Neuron 1 of core 0 in chip 0 to exploit TAU2, i would simply write:</p>

<p><code>U00-C00-N001-TAU2</code></p>

<hr>

<p>It is highly recommended to create your own bias settings starting from the examples in folder <code>caer/modules/netparser/networks</code>, called <code>hellobias.txt</code> and <code>hellotau.txt</code>, simply doing copy and paste of the biases (or TAU2) you want to change.</p>

<h2 id="toc_15"><a name="gui-pane"></a>GUI</h2>

<hr>

<p>Now that you have a network file all you have to do is read it using the parser. The easiest way to do this is by using the <a href="https://inilabs.com/support/software/caer/#h.uukewlagv1w">java cAER GUI</a>.</p>

<p>You can initiliaze the netPraser module like any other module:
1. Clicking on add module
2. Select the libnetparser module from the list and choosing a name
3. Set the moduleInput to 1[12]
4. Reset caer and the Java GUI</p>

<p>Once you start the Java GUI and initialize the netParser GUI you should see this window:</p>

<p><img src="./doc_images/GUI.png" width="350px"  /></p>

<p>From this window you can run the following functions:</p>

<ol>
<li>Clear Network: This will set all SRAMs and CAM registers to 0 and delete any connections in the manager. </li>
<li>Program Biases and Tau from .txt: Import the biases and tau in file in the txt_file input box and program the board using it.</li>
<li>Program network from .txt: Import the network in file in the txt_file input box and program the board using it.</li>
<li>Program network from .xml: Import the network in file in the xml_file input box and program the board using it.</li>
<li>Set Default Spiking Biases and Tau: Set biases in the board to a configuration that will allow you to see increased or decreased activation from incoming spikes. Moreover it restores every Neuron to TAU1 constant.</li>
</ol>

<h2 id="toc_16"><a name="test-pane"></a>Test</h3>

<hr>

<h3 id="toc_16"><a name="test-pane"></a>Network test</h3>

<p>A good sanity check to make sure everything is working properly is to program the helloworld network for this module:</p>

<ol> 
<li>Program with either the hellonet.txt or hellonet.xml network architecture. This will connect (one to one) neurons in U03C03 -&gt; U00C00 with fast excitatory connections. U02C02 -&gt; U00C00 with slow exciatory connections and U01C01 -&gt; U00C00 with fast inhibitory connections. </li>
<li>Set the Default Spiking Biases.</li>
<li>Now by changing the DC bias from the dynapse module GUI of cores U03C03, U02C02 and U01C01 you can effectively manipulate U00C00 like so:</li>
</ol>

<p>Increase U03C03 DC as see activity in U00C00 increase.</p>

<p><img src="./doc_images/U3.png" width="350px"  /></p>

<p>Increase U02C02 DC as see activity in U00C00 increase.</p>

<p><img src="./doc_images/U2.png" width="350px"  /></p>

<p>Increase U01C01 DC as see activity in U00C00 decrease.</p>

<p><img src="./doc_images/U1.png" width="350px" /></p>

<p>If you see a similar behaviour, everything is probably working correctly.</p>

<h3 id="toc_16"><a name="test-pane"></a>Biases and Tau test</h3>

<p>The same test done for the network configuration, can be done for biases:</p>

<ol>
<li>In the cAER GUI, under DYNAPSE module, press &quot;Set Biases to default&quot; for the whole chip. This will set the biases such enhance the neuron firing (this is clear looking at the visualizer).
<li>Program the board with hellobias.txt biases settings pressing on &quot;Program Biases and Tau fronm .txt&quot; in NETPARSER module. This will apply the same biases as when pressing &quot;Set Biases to default&quot; in NETPARSER module. Repeat again the test with hellonet.txt (without pressing &quot;Set Biases to default&quot;) to demonstrate that the bias programming has been performed correctly.</li>
</ol>

<p>Another test can be done to test TAU2 programming:</p>
<ol>
<li>In the cAER GUI press &quot;Set Default Spiking Biases and Tau&quot;: this will set the biases on the board that will allow you to see increased or decreased activation from incoming spikes. It will also set all neurons to TAU1.
<li>Program the board with hellotau.txt biases and tau settings. This settings will set the first line of neurons (from 0 to 15) in core 0 of chip 0 to TAU2. Then, to demonstrate that the set has been performed, two biases are changed: IF_DC_P is set to coarse value 0 and fine value 10, making all neurons of core 0 spike. Then, IF_TAU1_N parameter is set to an high value (coarse value 4, fine value 10). This will make all neurons connected to TAU1 stop firing, leaving unaltered only neurons connected to TAU2. The final spikeView that you should see is similar to the following one:</li>
</ol>

<p><img src="./doc_images/tau1.png" width="350px" /></p>

<hr>

<h1 id="toc_17"><a name="documentation-pane"></a> Documentation</h1>

<p>In order to connect two neurons in the dynapse you have to do 2 things. </p>

<ol>
<li>Add the address and realtive location of the post-synaptic neuron to the pre-synaptic neuron&#39;s SRAM register.</li>
<li>Add the core and neuron of the pre-synaptic neuron and the connection type (slow inhibitory, fast excitatory, etc) to the CAM register of the post-synaptic neuron. </li>
</ol>

<p>For a more detailed description of this look at section 2.5 of the <a href="https://inilabs.com/support/hardware/user-guide-dynap-se/#h.yzsrxxwvcwdp">dynapse documation</a>. </p>

<p>Finally, since the dynapse is unable to read the values in its SRAM and CAM registers, it makes sense to have this module keep a software side representation of these registers so that they can be queried by other programs. </p>

<p>The documentation for this module can be found here: <a href="index.html">link in progress</a></p>

<h1 id="toc_17"><a name="limitations-pane"></a> MODULE LIMITATIONS AND HINTS FOR THE USER (READ IT!!!!!)</h1>
<p>As said in the <a href="documentation-pane">Documentation</a> section, Neurons are connected using SRAM and CAM cells. Every neuron has 4 SRAM cells, used to encode the destination neuron. Only 3 of them can be used, because SRAM 0 is used for debug purpouse (the flashing pixel that you see in cAER spike visualizer are possible only thanks to SRAM 0). Whenever a neuron spikes, an event (a sort of string of bits that encode the source neuron address) is generated. If at least one SRAM cell is written, the event is routed toward the destination Chip and Core. Every neuron, moreover, owns 64 CAM cells, used to encode the input neuron. Whenever an event matches the address written in a CAM, an EPSP is generated on the addressed neuron. Given this basic introduction about the DYNAP-se routing, the module limitations are explained in the following.</p>
<p>The module has been designed to exploit all the connection combinations that DYNAP-se can perform. It's limitation are related to the hardware connectivity limitations. Here below are listed all of them:</a></p>

<h3 id="toc_17"> Pay attention to neuron 0 of core 0</h3>
NEVER USE NEURON 0 OF CORE 0 (FOR EVERY CHIP PRESENT IN DYNAP-se) AS SOURCE OF A CONNECTION. Unfortunately that imply writing value 0 in the CAM of destination neurons, operation that should not be done. On the other hand, neuron 0 can be used as destination neuron of a connection. For instance, connections as: <code>U00-C00-N000-&gt;3-16-U00-C00-N001</code> or <code>U01-C00-N000-&gt;3-16-U00-C00-N001</code> cannot be done, while connections as <code>U00-C00-N001-&gt;3-16-U01-C00-N000</code> or <code>U01-C00-N000-&gt;3-16-U00-C00-N001</code> could be done.

<h3 id="toc_17"> SRAM cells occupation</h3>
A different SRAM cell is written every time the destination neuron belongs to a different chip. This means that a neuron can be connected up to 1023 neurons ON THE SAME CHIP, REQUIRING THE WRITING OF ONLY A SINGLE SRAM CELL. For example, writing: <code>U00-C00-N001-&gt;3-1-U00-C00-N000, U00-C00-N001-&gt;3-1-U00-C00-N002, U00-C00-N001-&gt;3-1-U00-C00-N003 ... etc</code> for every neuron of chip 0, neuron <code>U00-C00-N001</code> can be connected to every neuron of chip 0. This means that it is possible to connect up to three different chips with a Neuron. Attempting to connect a neuron to a fourth chip will raise an error.

<h3 id="toc_17"> CAM cells occupation</h3>
A different CAM cell is always written every time a new connection is specified. The amount of CAM cells that will be occupied is specified directly on the connection parameters. This imply that the number of different neurons from a which a neuron can receive events depends on the number of free CAMs. For example, writing <code>U00-C00-N001-&gt;3-64-U01-C00-N001</code>, all 64 CAMs of neuron <code>U01-C00-N001</code> are written for the connection. Hence, neuron <code>U01-C00-N001</code> cannot receive any other input. The maximum number of different inputs that a neuron can receive is equal to 64, as the number of its CAM cells. Pay attention that running out of CAMs is much easier that running out of SRAMs. When specifying a connection, try to use as less CAM as possible and, if you want to increase the strength of one connection, consider also changing the bias parameters PS_WEIGHT_EXC_F_N, PS_WEIGHT_EXC_S_N, PS_WEIGHT_INH_F_N or PS_WEIGHT_INH_S_N.

<h3 id="toc_17"> Avoid CAM clash</h3>
A general definition of CAM clash could be the following: A CAM clash happens when 2 NEURONS OF DIFFERENT CHIPS ARE CONNECTED TO NEURONS IN THE SAME CORE. For example <code>U02-C00-N001-&gt;3-1-U00-C00-N001</code> and <code>U01-C00-N001-&gt;3-1-U01-C00-N002</code> create a CAM clash, while <code>U02-C00-N001-&gt;3-1-U00-C00-N001</code> and <code>U01-C00-N001-&gt;3-1-U01-C01-N001</code> not. Be very careful when making connections between chips. When you have to connect two different group of neurons (from different chips), to the same destination chip and core, make sure to use different neuron addresses for the two groups, for example Group1 Neurons from 1 to 100 and Group2 Neurons from 101 to 200. The software will detect a CAM clash and will display which are the neurons involved, as well as the connection that raised the error.

<h3 id="toc_17"> Multiple parsing</h3>
The module has been tested with different configurations, and should (in principle) work for every network that can be pysically implemented on DYNAP-se. On the other hand, a safe approach when building your network, could be the following: If your network configuration permit so, divide the connections in different steps, on different files (netpt1.txt, netpt2.txt, etc...). The module, in fact, support multiple parsing. This means that every time you parse a file with a network, the old connections are not deleted while the new ones are created. In this way a complex network can be constructed (AND TESTED) in multiple runs. To test every part of the network (again, if is allowed by the network configuration), just increase the IF_DC_P parameter of the core in which are present the source neurons, making them fire. If the destination neurons are really connected to the source neurons, they should start firing. If this not happen, try to increase the synaptic weights of the core in which are present the destination neurons. If this still don't happen, check the connection file.   

<h3 id="toc_17"> Specifing biases and tau</h3>
When specifying biases and tau in the .txt file, separate them clearly (spaces are not considered by the software), maybe adding some comments.
As written in the tutorial, the best way to don't commit errors when writing the biases or tau, is to copy and edit the files called hellobias.txt and hellotau.txt, in folder <code> caer/modules/netparser/networks </code>. 
</body>

<h3 id="toc_17"> Test limitations</h3>
All connection limitations and CAM clashes are demonstrated in the &quot;errors_test.txt file&quot;, in folder <code>caer/modules/netparser/networks</code>. It is highly suggested to load the network contained inside and understand why some errors occour or not.
</html>